<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
  
    <title>Student Management Project</title>
</head>
<body> 
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
   <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css">

<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.js"></script>

  <div class="container">
    <table class="display" style="width:100%" id="student">
          <thead>
            <th>NAME</th>
            <th>EMAIL</th>
            <th>BIRTHDAY</th>
            <th>GRADUATION DATE</th>
            <th>GRADE</th>
            <th>CREATE DATE</th>
            <th>UPDATE DATE</th> 
            <th> </th>
           
          </thead>
      </table>
    </div>
</body>
</html>

<script>
  var hostUrl = "http://" + document.location.hostname + ":" + window.location.port;
  var apiUrl = '/api/Students';


  $(document).ready(function () {
    var table = $('#student').dataTable();
    
    $.ajax({
      type : "GET",
      url: "https://localhost:7058/api/Students",
      dataType :"json",
      success:function(data){
        for (var i=0; i<data.length; i++)
        {
          
          var deleteColumn = '<a class="btn  btn-xs btn-danger action" data-action="edit" onClick=" return deleteStudent(this.data[i].id)">delete<i class="fa fa-trash"></i> </a>';
          table.fnAddData([data[i].name,data[i].email,data[i].birthday,
          data[i].graduationDate,data[i].grade,data[i].createDate,data[i].updateDate,deleteColumn]);
        
        }
      },
      //error:
    })});
    function deleteStudent(ID) {
      var ans = confirm("Are you sure you want to delete this Record?");
      if (ans) {
        $.ajax({
            url: "https://localhost:7058/api/Admins/1/Students/" + ID.toString(),
            type: "DELETE",
            contentType: "application/json;charset=UTF-8",
            dataType: "json",
            success: function (result) {
                loadData();
            },
            error: function (errormessage) {
                alert(errormessage.responseText);
            }
        });
    }
}
   

 

</script>
